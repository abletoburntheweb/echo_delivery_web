<!-- templates/core/admin_menu.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω –ú–µ–Ω—é | ECHO Corp.</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'core/css/admin_menu.css' %}">
    <!-- –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Ç–µ–ø–µ—Ä—å –≤ admin_menu.css -->
</head>
<body>
    <div class="header">
        <span class="header-title">ECHO Corp.</span>
        <div class="header-buttons">
            <a href="{% url 'profile' %}" class="profile-button user-icon">üë§</a>
            <a href="{% url 'admin:index' %}" class="profile-button admin-icon">‚öôÔ∏è</a>
        </div>
    </div>
    <div class="full-screen-menu">
        <!-- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" -->
        <button class="add-dish-btn" onclick="openModal()">–î–æ–±–∞–≤–∏—Ç—å</button>

        <div class="search-bar">
            <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫...">
            <button class="search-btn">üîç</button>
        </div>

        <div class="menu-grid">
            {% for dish in dishes %}
                <a href="{% url 'admin_dish_detail' dish.id %}" class="dish-card-link">
                    <div class="dish-card">
                        <img src="{{ dish.image }}" alt="{{ dish.name }}" class="dish-image">
                        <div class="dish-info">
                            <h3 class="dish-name">{{ dish.name }}</h3>
                            <p class="dish-price">{{ dish.price }}‚ÇΩ</p>
                        </div>
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    {% include 'core/partials/modal_category.html' %}

    <script>
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        function openModal() {
            document.getElementById("myModal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("myModal").style.display = "none";
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById("myModal");
            if (event.target === modal) {
                closeModal();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ)
        function addCategory() {
            const newCategoryName = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:");
            if (newCategoryName && newCategoryName.trim() !== "") {
                console.log("–ü–æ–ø—ã—Ç–∫–∞ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é:", newCategoryName);
                const select = document.getElementById("categorySelect");
                const option = document.createElement("option");
                option.value = "new_" + newCategoryName; // –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                option.text = newCategoryName;
                select.add(option);
                select.value = option.value; // –í—ã–±–µ—Ä–µ–º –Ω–æ–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ)
        function removeCategory() {
            const select = document.getElementById("categorySelect");
            const selectedValue = select.value;
            if (selectedValue === "") {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è.");
                return;
            }
            console.log("–ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å ID:", selectedValue);
            if (confirm("–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ —É–¥–∞–ª—è–µ—Ç –±–ª—é–¥–∞.")) {
                 select.remove(select.selectedIndex); // –£–¥–∞–ª—è–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
                 select.value = ""; // –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä
            }
        }
    </script>
</body>
</html>