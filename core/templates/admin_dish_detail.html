<!-- templates/admin_dish_detail.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ dish.name }} | ECHO Corp.</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'core/css/admin_dish_detail.css' %}">
</head>
<body>
    <div class="header">
        <span class="header-title">ECHO Corp.</span>
        <div class="header-buttons">
            <a href="{% url 'admin_logout' %}" class="profile-button">üö™</a>
            <a href="{% url 'admin_calendar' %}" class="profile-button">üìÖ</a>
            <span class="unused-button">üìã</span>
        </div>
    </div>

    <div class="full-screen-menu">
        <a href="{% url 'admin_menu' %}" class="back-button">–ù–∞–∑–∞–¥</a>

        <form method="post" action="{% url 'update_dish' dish.id_dish %}" enctype="multipart/form-data" class="dish-detail-card">
            {% csrf_token %}
            <input type="hidden" name="dish_id" value="{{ dish.id_dish }}">

            <div class="dish-header">
                <h2 class="dish-name">{{ dish.name }}</h2>
                <button type="submit" class="save-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" class="save-button" onclick="confirmDelete()">–£–¥–∞–ª–∏—Ç—å</button>
            </div>

            <div class="image-container">
                <img src="{{ MEDIA_URL }}{{ dish.img }}" alt="{{ dish.name }}" class="dish-image">
            </div>

            <div class="dish-content">
                <input type="text" name="name" class="dish-name-input" value="{{ dish.name }}" placeholder="–ò–º—è –±–ª—é–¥–∞" required>

                <textarea name="description" class="dish-description-input" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞">{{ dish.description }}</textarea>

                <div class="price-container">
                    <label for="dish-price">–¶–µ–Ω–∞:</label>
                    <input type="number" name="price" class="dish-price-input" value="{{ dish.price }}" step="0.01" placeholder="–¶–µ–Ω–∞" required>
                </div>

                <div class="image-upload">
                    <label for="image">–ù–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å):</label>
                    <input type="file" name="image" id="image" accept="image/*">
                </div>

            </div>
        </form>

        <div class="action-buttons">
            <form method="post" action="{% url 'add_to_cart' %}">
                {% csrf_token %}
                <input type="hidden" name="dish_id" value="{{ dish.id_dish }}">
                <input type="hidden" name="dish_name" value="{{ dish.name }}">
                <input type="hidden" name="dish_price" value="{{ dish.price }}">
                <input type="hidden" name="dish_image" value="{{ MEDIA_URL }}{{ dish.img }}">

                <div class="quantity-controls">
                    <label for="quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                    <input type="number" id="quantity" name="quantity" value="1" min="1" class="quantity-input">
                </div>

                <button type="submit" class="add-button">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            </form>
        </div>

        <form id="deleteDishForm" method="post" action="{% url 'delete_dish' dish.id_dish %}" style="display: none;">
            {% csrf_token %}
        </form>
    </div>

    <script>
        function confirmDelete() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ '{{ dish.name }}'?")) {
                document.getElementById('deleteDishForm').submit();
            }
        }
    </script>

</body>
</html>